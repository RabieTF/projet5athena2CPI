<html>
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" type="text/css" href="dashboard.css">
<title> DashBoard </title>
</head>
<body>
<div class="header">
  <h1>Dashboard</h1>
  <br><br><br>
  <p class="user_details"> </p>
  <a href="#" id="log_out" style="float:right;color:#FFF;float:right;
      margin-top:-100px;
      margin-right:50px;
      padding: 10px 20px; text-decoration: none; font-size: 15px;  cursor: pointer;"> Log Out</a>
        
            
</div>
<div class="do">
       <ul id="list" ></ul>
</div>
 <div class="center">
         <input type="checkbox" id="show">
         <label for="show" class="show-btn"  id="hidee1"> ➕ </label>
         <div class="container" id="hide" >
            <label for="show" class="close-btn fas fa-" title="close"  onclick="show()" > ✖️ </label>
            <div class="text">
                          Add Driver
            </div>
            <div class="text" style="font-size:90%"> Please enter the needed information </div>
            <form action="#" id="addForm">
               <div class="data">
                  <input type="email" placeholder="Driver's Email" id="email_driver" required>
               </div>
               <div class="btn">
                 <div class="inner"></div>
                  <button type="submit" class="bu" onclick="add()"> Confirm </button></div>
            </form>
         </div>
      </div>
     <script>
        function add() {
           const addForm = document.querySelector("#addForm");
            const email = addForm['email_driver'].value;
            let ref = db.collection('drivers');
            let query = ref.where('email','==',email);
            var driver_data;
            query.get()
            .then((querySnapshot) => {
               querySnapshot.forEach((doc) => {
              // doc.data() is never undefined for query doc snapshots
               console.log(doc.id, " => ", doc.data());
               driver_data = doc.data();
               var a = document.getElementById("list");
               console.log("the variable driver data contain : ",driver_data)
                var emaildriver = driver_data.email;
                var driver_name = driver_data.firstname +' '+driver_data.lastname;
                var product = driver_data.email;
                var li = document.createElement("li");
                li.setAttribute('class', "hi");
                 li.appendChild(document.createTextNode(emaildriver));
                 li.appendChild(document.createTextNode(driver_name));
                 li.appendChild(document.createTextNode(driver_data.licenseExpiry));
                 li.appendChild(document.createTextNode(driver_data.licenseID));
                 a.appendChild(li);
           });})
            
        }
        // Creating a function to remove item from list
        function remove() {
            // Declaring a varible to get select element
            var a = document.getElementById("list");
            var product = document.getElementById("product");
            var item = document.getElementById(product.value);
            a.removeChild(item);
        }
         function hide()
         {
                     let a=1;
            if (a==1)
            {
               document.getElementById("hide").style.display="none";
  }
       return a=0;  }
    </script> 
    </script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>
    <script>// Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAvSXWzbhLMc9ShxfTxEsNzJqxfhFhBqyo",
            authDomain: "project101-1b151.firebaseapp.com",
            databaseURL: "https://project101-1b151-default-rtdb.firebaseio.com",
            projectId: "project101-1b151",
            storageBucket: "project101-1b151.appspot.com",
            messagingSenderId: "1096381944683",
            appId: "1:1096381944683:web:06561692ba44fb0a54722e",
            measurementId: "G-M2G1ZKTHZX"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        const auth = firebase.auth();
        const db = firebase.firestore();

        db.settings({timestampInSnapshots: true});
    </script>
    <script src="./authh.js"></script>          
</body>
</html>